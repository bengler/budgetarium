(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e){var s=i(e,".");if(r(n,s))return n[s];if(r(t,s))return u(s,t[s]);var o=i(s,"./index");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);throw new Error('Cannot find module "'+e+'"')},f=function(e){for(var n in e)r(e,n)&&(t[n]=e[n])};e.require=a,e.require.define=f,e.require.brunch=!0})(),window.require.define({burst:function(e,t,n){var r,i=function(e,t){return function(){return e.apply(t,arguments)}};r=function(){function e(e){this.arcTween=i(this.arcTween,this),this.click=i(this.click,this),this.setYear=i(this.setYear,this);var t=this;this.title=e.title||"",this.width=e.width||300,this.height=e.height||300,this.radius=Math.min(this.width,this.height)/2,this.color=d3.scale.category20c(),this.formatNumber=d3.format(",d"),this.year="2013",this.comparator=e.comparator||(d,year)(function(){return Math.max(0,d.values[year]||0)}),this.x=d3.scale.linear().range([0,2*Math.PI]),this.y=d3.scale.sqrt().range([0,this.radius]),this.container=d3.select("#chart").append("div"),this.container.append("div").attr("class","title").text(this.title),this.vis=this.container.append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate("+this.width/2+","+this.height/2+")"),this.nodeDesc=this.container.append("div").attr("class","nodeDesc").text("foo"),this.partition=d3.layout.partition().value(function(e){return t.comparator(e,t.year)}).children(function(e){return e.values}),this.arc=d3.svg.arc().startAngle(function(e){return Math.max(0,Math.min(2*Math.PI,t.x(e.x)))}).endAngle(function(e){return Math.max(0,Math.min(2*Math.PI,t.x(e.x+e.dx)))}).innerRadius(function(e){return Math.max(0,t.y(e.y))}).outerRadius(function(e){return Math.max(0,t.y(e.y+e.dy))}),this.label=function(e){return e.key+" : "+this.formatNumber(e.value)},this.load()}return e.prototype.setYear=function(e){return this.click(this.path[0]),this.year=e,this.update()},e.prototype.load=function(){var e=this;return d3.csv("/data/2013_byraÌŠdets_forslag_drift.csv",function(t){return e.tree=d3.nest().key(function(e){return e.Avdelingsnavn}).key(function(e){return e.Kapittelnavn}).key(function(e){return e.Artsgruppenavn}).rollup(function(e){var t;return t=e[0],["2013","2014","2015","2016"].map(function(n){return t[n]=e.reduce(function(e,t,r,i){return e+ +t[n]},0)}),t}).entries(t),e.tree={values:e.tree,key:"Sum "+e.title},e.update()})},e.prototype.update=function(){var e=this;return this.path=this.vis.data([this.tree]).selectAll("path").data(this.partition.nodes),this.path.exit().remove(),this.path.transition().attr("d",this.arc),this.path.enter().append("path").attr("d",this.arc).style("fill",function(t){return e.color(t.key)}).on("click",this.click).on("mouseover",function(t){return e.nodeDesc.text(e.label(t))}).on("mouseout",function(t){return e.nodeDesc.text("")}).append("svg:title").text(function(t){return e.label(t)})},e.prototype.click=function(e){return this.path.transition().duration(750).attrTween("d",this.arcTween(e))},e.prototype.arcTween=function(e){var t,n,r,i=this;return t=d3.interpolate(this.x.domain(),[e.x,e.x+e.dx]),n=d3.interpolate(this.y.domain(),[e.y,1]),r=d3.interpolate(this.y.range(),[e.y===0?0:40,this.radius]),function(e,s){return s===0?function(t){return i.arc(e)}:function(s){return i.x.domain(t(s)),i.y.domain(n(s)).range(r(s)),i.arc(e)}}},e}(),window.Burst=r}}),window.require.define({initialize:function(e,t,n){var r,i,s,o,u;(r=this.Hipster)==null&&(this.Hipster={}),(i=Hipster.Routers)==null&&(Hipster.Routers={}),(s=Hipster.Views)==null&&(Hipster.Views={}),(o=Hipster.Models)==null&&(Hipster.Models={}),(u=Hipster.Collections)==null&&(Hipster.Collections={}),$(function(){var e,n,r,i,s;return t("../lib/app_helpers"),t("./burst"),Hipster.Views.AppView=new(e=t("views/app_view")),Backbone.history.start({pushState:!0}),r={title:"Utgifter",width:400,height:400,comparator:function(e,t){return Math.max(0,e.values[t]||0)},color:d3.interpolateHsl(d3.hsl("hsl(20,20%,30%)"),d3.hsl("hsl(20.5,100%,25%)"))},i={title:"Inntekter",width:400,height:400,comparator:function(e,t){return(Math.min(0,e.values[t])||0)*-1},color:d3.interpolateHsl(d3.hsl("hsl(83,80%,30%)"),d3.hsl("hsl(83.5,100%,25%)"))},n=[new Burst(r),new Burst(i)],s=function(e){return n.map(function(t){return t.setYear(e)})},$("span#2013").click(function(){return s("2013")}),$("span#2014").click(function(){return s("2014")}),$("span#2015").click(function(){return s("2015")}),$("span#2016").click(function(){return s("2016")})})}}),window.require.define({"lib/app_helpers":function(e,t,n){(function(){return Swag.Config.partialsPath="../views/templates/",function(){var e,t,n,r,i;e=window.console=window.console||{},n=void 0,t=function(){},r="assert,count,debug,dir,dirxml,error,exception,                     group,groupCollapsed,groupEnd,info,log,markTimeline,                     profile,profileEnd,time,timeEnd,trace,warn".split(","),i=[];while(n=r.pop())i.push(e[n]=e[n]||t);return i}()})()}}),window.require.define({"lib/view":function(e,t,n){var r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="section",t.prototype.template=function(){},t.prototype.initialize=function(){return this.render()},t.prototype.getRenderData=function(){var e;return(e=this.model)!=null?e.toJSON():void 0},t.prototype.render=function(){return this.beforeRender(),this.$el.html(this.template(this.getRenderData())),this.afterRender(),this},t.prototype.beforeRender=function(){},t.prototype.afterRender=function(){},t.prototype.destroy=function(){return this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),Backbone.View.prototype.remove.call(this)},t}(Backbone.View)}}),window.require.define({"lib/view_collection":function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("./view"),i=function(e){function t(){return this.renderOne=o(this.renderOne,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.collection=new Backbone.Collection,t.prototype.view=new r,t.prototype.views=[],t.prototype.length=function(){return this.views.length},t.prototype.add=function(e,t){var n,r,i;t==null&&(t={}),e=_.isArray(e)?e.slice():[e];for(r=0,i=e.length;r<i;r++)n=e[r],this.get(n.cid)||(this.views.push(n),t.silent||this.trigger("add",n,this));return this},t.prototype.get=function(e){return this.find(function(t){return t.cid===e})||null},t.prototype.remove=function(e,t){var n,r,i;t==null&&(t={}),e=_.isArray(e)?e.slice():[e];for(r=0,i=e.length;r<i;r++)n=e[r],this.destroy(n),t.silent||this.trigger("remove",n,this);return this},t.prototype.destroy=function(e,t){var n;return e==null&&(e=this),t==null&&(t={}),n=this.filter(_view)(function(){return e.cid!==_view.cid}),this.views=n,e.undelegateEvents(),e.$el.removeData().unbind(),e.remove(),Backbone.View.prototype.remove.call(e),t.silent||this.trigger("remove",e,this),this},t.prototype.reset=function(e,t){var n,r,i,s,o,u;t==null&&(t={}),e=_.isArray(e)?e.slice():[e],u=this.views;for(r=0,s=u.length;r<s;r++)n=u[r],this.destroy(n,t);if(e.length!==0){for(i=0,o=e.length;i<o;i++)n=e[i],this.add(n,t);t.silent||this.trigger("reset",n,this)}return this},t.prototype.renderOne=function(e){var t;return t=new this.view({model:e}),this.$el.append(t.render().el),this.add(t),this},t.prototype.renderAll=function(){return this.collection.each(this.renderOne),this},t}(r),s=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"],_.each(s,function(e){return i.prototype[e]=function(){return _[e].apply(_,[this.views].concat(_.toArray(arguments)))}}),n.exports=i}}),window.require.define({"routers/app_router":function(e,t,n){var r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.routes={"":function(){}},t}(Backbone.Router)}}),window.require.define({"views/app_view":function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("../lib/view"),r=t("../routers/app_router"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.el="body.application",t.prototype.initialize=function(){var e;return this.router=new r,typeof Hipster!="undefined"&&Hipster!==null?(e=Hipster.Routers)!=null?e.AppRouter=this.router:void 0:void 0},t}(s)}})